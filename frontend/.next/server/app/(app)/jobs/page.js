(()=>{var e={};e.id=853,e.ids=[853],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},1052:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=s(7096),a=s(6132),o=s(7284),i=s.n(o),n=s(2564),l={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);s.d(t,l);let d=["",{children:["(app)",{children:["jobs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7654)),"/home/rado/personal/turizmo/frontend/src/app/(app)/jobs/page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6538)),"/home/rado/personal/turizmo/frontend/src/app/(app)/layout.js"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4553)),"/home/rado/personal/turizmo/frontend/src/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.bind(s,220)),"/home/rado/personal/turizmo/frontend/src/app/not-found.js"]}],c=["/home/rado/personal/turizmo/frontend/src/app/(app)/jobs/page.js"],p="/(app)/jobs/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(app)/jobs/page",pathname:"/jobs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7220:(e,t,s)=>{Promise.resolve().then(s.bind(s,2372))},2372:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(3854),a=s(4218),o=s(1599),i=s(6726),n=s(2324),l=s(3032),d=s(3341),c=s(55);let p=({job:e,isCompany:t,onApply:s,onDelete:a})=>{let{title:o,description:n,location:l,wage_rate:d,company_id:c}=e;return(0,r.jsxs)("div",{className:"max-w p-4 border border-gray-300 rounded-md mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:o}),r.jsx("p",{className:"text-gray-600 mb-2 text-sm",children:n}),(0,r.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Location: ",l]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Wage Rate: â‚¬",d]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Company: ",c]}),t?r.jsx(i.Z,{className:"!bg-red-500",onClick:a,children:"Delete"}):r.jsx(i.Z,{onClick:s,children:"Apply"})]})};function u(){let{user:e}=(0,o.a)({middleware:"auth"}),{data:t,error:s,mutate:u,isLoading:m}=(0,n.i)("/api/company/jobs"),[x,h]=(0,a.useState)(!1),[j,g]=(0,a.useState)({title:"",description:"",location:"",date:"",wage_rate:""}),b=()=>{console.log("haha"),h(!0)},y=()=>{h(!1)},f=e=>{let{name:t,value:s}=e.target;g(e=>({...e,[t]:s}))},v=async t=>{t.preventDefault();try{let t=await c.Z.post("/api/jobs",{...j,company_id:e.id});200===t.status?(u(),y()):console.error("Error creating job")}catch(e){console.error("Error creating job",e)}},w=async e=>{e.preventDefault()},N=async e=>{e.preventDefault()};return r.jsx("div",{className:"py-8 h-[calc(100vh-65px)]",children:r.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 h-full",children:(0,r.jsxs)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg h-full p-6",children:[t?.jobs?.length>0?(0,r.jsxs)(r.Fragment,{children:[t.jobs.map(t=>r.jsx(p,{job:t,isCompany:e.is_company,onDelete:()=>w(t.id),onApply:()=>N(t.id)},t.id)),r.jsx("div",{className:"text-center mt-6",children:r.jsx(i.Z,{onClick:b,children:"+ Create New Job"})})]}):r.jsx("div",{className:"flex items-center justify-center h-full",children:m?"Loading...":s?s?.message:r.jsx(i.Z,{onClick:b,children:"+ Create New Job"})}),x&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md p-5 max-w-md mx-auto",children:[(0,r.jsxs)("form",{onSubmit:v,className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx(d.Z,{htmlFor:"title",children:"Job Title"}),r.jsx(l.Z,{type:"text",id:"title",name:"title",value:j.title,onChange:f,required:!0})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx(d.Z,{htmlFor:"description",children:"Description"}),r.jsx(l.Z,{type:"text",id:"description",name:"description",value:j.description,onChange:f,required:!0})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx(d.Z,{htmlFor:"location",children:"Location"}),r.jsx(l.Z,{type:"text",id:"location",name:"location",value:j.location,onChange:f,required:!0})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx(d.Z,{htmlFor:"date",children:"Date"}),r.jsx(l.Z,{id:"date",name:"date",value:j.date,onChange:f,type:"date",required:!0})]}),(0,r.jsxs)("div",{className:"col-span-2",children:[r.jsx(d.Z,{htmlFor:"wageRate",children:"Wage Rate"}),r.jsx(l.Z,{id:"wageRate",name:"wage_rate",value:j.wageRate,onChange:f,type:"number",required:!0})]}),r.jsx("div",{className:"col-span-2",children:r.jsx(i.Z,{type:"submit",children:"Create Job"})})]}),r.jsx("button",{onClick:y,className:"absolute top-0 right-0 mt-2 mr-2 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]})})})}function m(){let{user:e,userDetails:t,mutateUserDetails:s}=(0,o.a)({middleware:"auth"}),{data:a,error:i,mutate:l,isLoading:d}=(0,n.i)("/api/worker/jobs"),u=async t=>{try{let r=await c.Z.post("/api/application",{job_id:t,worker_id:e.id});200===r.status?(l(),s()):console.error("Error creating job")}catch(e){console.error("Error creating job",e)}};return r.jsx("div",{className:"py-8 h-[calc(100vh-65px)]",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 h-full",children:[(0,r.jsxs)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg p-6",children:["Hey"," ",r.jsx("span",{className:"font-semibold",children:t?.worker.full_name})," ","you have"," ",r.jsx("span",{className:"font-semibold",children:t?.worker.daily_application_limit})," ","applications left for today!"]}),r.jsx("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg p-6 mt-1",children:a?.jobs?.length>0?r.jsx(r.Fragment,{children:a.jobs.map(t=>r.jsx(p,{job:t,isCompany:e.is_company,onApply:()=>u(t.id)},t.id))}):r.jsx("div",{className:"flex items-center justify-center",children:d?"Loading...":i?i?.message:"No jobs found..."})})]})})}function x(){let{user:e}=(0,o.a)({middleware:"auth"});return e.is_company?r.jsx(u,{}):r.jsx(m,{})}},6726:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3854);let a=({type:e="submit",className:t,...s})=>r.jsx("button",{type:e,className:`${t} inline-flex items-center px-4 py-2 bg-blue-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150`,...s})},3032:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3854);let a=({disabled:e=!1,className:t,...s})=>r.jsx("input",{disabled:e,className:`${t} rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 w-full`,...s})},3341:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(3854);let a=({className:e,children:t,...s})=>r.jsx("label",{className:`${e} block font-medium text-sm text-gray-700`,...s,children:t})},2324:(e,t,s)=>{"use strict";s.d(t,{i:()=>l});var r=s(9335),a=s(55),o=s(4218),i=s(1018);let n=async(e,t,s)=>{let r=(0,i.useRouter)();try{let r=await (0,a.Z)({method:t,url:e,...s});return r.data}catch(e){if(409!==e.response.status)throw e;r.push("/verify-email")}},l=(e,t="GET",s={})=>{let{data:a,error:i,mutate:l,isValidating:d}=(0,r.ZP)([e,t],()=>n(e,t,s),s);return(0,o.useEffect)(()=>{},[a,i]),{data:a,error:i,mutate:l,isLoading:d}}},7654:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>o,default:()=>l});var r=s(5153);let a=(0,r.createProxy)(String.raw`/home/rado/personal/turizmo/frontend/src/app/(app)/jobs/page.js`),{__esModule:o,$$typeof:i}=a,n=a.default,l=n}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[84,443,490,575],()=>s(1052));module.exports=r})();