(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{4146:function(e,t,a){Promise.resolve().then(a.bind(a,7245))},7245:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(7437),i=a(2265),r=a(7930),n=a(3540),o=a(2246),l=a(5830),c=a(3042),d=a(6952),u=e=>{let{job:t,isCompany:a,onApply:i,onDelete:r}=e,{title:o,description:l,location:c,wage_rate:d,company_id:u}=t;return(0,s.jsxs)("div",{className:"max-w p-4 border border-gray-300 rounded-md mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold mb-2",children:o}),(0,s.jsx)("p",{className:"text-gray-600 mb-2 text-sm",children:l}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Location: ",c]}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Wage Rate: â‚¬",d]}),(0,s.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Company: ",u]}),a?(0,s.jsx)(n.Z,{className:"!bg-red-500",onClick:r,children:"Delete"}):(0,s.jsx)(n.Z,{onClick:i,children:"Apply"})]})};function m(){var e;let{user:t}=(0,r.a)({middleware:"auth"}),{data:a,error:m,mutate:h,isLoading:p}=(0,o.i)("/api/company/jobs"),[x,g]=(0,i.useState)(!1),[f,j]=(0,i.useState)({title:"",description:"",location:"",date:"",wage_rate:""}),v=()=>{console.log("haha"),g(!0)},y=()=>{g(!1)},b=e=>{let{name:t,value:a}=e.target;j(e=>({...e,[t]:a}))},w=async e=>{e.preventDefault();try{let e=await d.Z.post("/api/jobs",{...f,company_id:t.id});200===e.status?(h(),y()):console.error("Error creating job")}catch(e){console.error("Error creating job",e)}},N=async e=>{e.preventDefault()},Z=async e=>{e.preventDefault()};return(0,s.jsx)("div",{className:"py-8 h-[calc(100vh-65px)]",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 h-full",children:(0,s.jsxs)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg h-full p-6",children:[(null==a?void 0:null===(e=a.jobs)||void 0===e?void 0:e.length)>0?(0,s.jsxs)(s.Fragment,{children:[a.jobs.map(e=>(0,s.jsx)(u,{job:e,isCompany:t.is_company,onDelete:()=>N(e.id),onApply:()=>Z(e.id)},e.id)),(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsx)(n.Z,{onClick:v,children:"+ Create New Job"})})]}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full",children:p?"Loading...":m?null==m?void 0:m.message:(0,s.jsx)(n.Z,{onClick:v,children:"+ Create New Job"})}),x&&(0,s.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md p-5 max-w-md mx-auto",children:[(0,s.jsxs)("form",{onSubmit:w,className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(c.Z,{htmlFor:"title",children:"Job Title"}),(0,s.jsx)(l.Z,{type:"text",id:"title",name:"title",value:f.title,onChange:b,required:!0})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(c.Z,{htmlFor:"description",children:"Description"}),(0,s.jsx)(l.Z,{type:"text",id:"description",name:"description",value:f.description,onChange:b,required:!0})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(c.Z,{htmlFor:"location",children:"Location"}),(0,s.jsx)(l.Z,{type:"text",id:"location",name:"location",value:f.location,onChange:b,required:!0})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(c.Z,{htmlFor:"date",children:"Date"}),(0,s.jsx)(l.Z,{id:"date",name:"date",value:f.date,onChange:b,type:"date",required:!0})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)(c.Z,{htmlFor:"wageRate",children:"Wage Rate"}),(0,s.jsx)(l.Z,{id:"wageRate",name:"wage_rate",value:f.wageRate,onChange:b,type:"number",required:!0})]}),(0,s.jsx)("div",{className:"col-span-2",children:(0,s.jsx)(n.Z,{type:"submit",children:"Create Job"})})]}),(0,s.jsx)("button",{onClick:y,className:"absolute top-0 right-0 mt-2 mr-2 text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]})})})}function h(){var e;let{user:t,userDetails:a,mutateUserDetails:i}=(0,r.a)({middleware:"auth"}),{data:n,error:l,mutate:c,isLoading:m}=(0,o.i)("/api/worker/jobs"),h=async e=>{try{let a=await d.Z.post("/api/application",{job_id:e,worker_id:t.id});200===a.status?(c(),i()):console.error("Error creating job")}catch(e){console.error("Error creating job",e)}};return(0,s.jsx)("div",{className:"py-8 h-[calc(100vh-65px)]",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 h-full",children:[(0,s.jsxs)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg p-6",children:["Hey"," ",(0,s.jsx)("span",{className:"font-semibold",children:null==a?void 0:a.worker.full_name})," ","you have"," ",(0,s.jsx)("span",{className:"font-semibold",children:null==a?void 0:a.worker.daily_application_limit})," ","applications left for today!"]}),(0,s.jsx)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg p-6 mt-1",children:(null==n?void 0:null===(e=n.jobs)||void 0===e?void 0:e.length)>0?(0,s.jsx)(s.Fragment,{children:n.jobs.map(e=>(0,s.jsx)(u,{job:e,isCompany:t.is_company,onApply:()=>h(e.id)},e.id))}):(0,s.jsx)("div",{className:"flex items-center justify-center",children:m?"Loading...":l?null==l?void 0:l.message:"No jobs found..."})})]})})}function p(){let{user:e}=(0,r.a)({middleware:"auth"});return e.is_company?(0,s.jsx)(m,{}):(0,s.jsx)(h,{})}},3540:function(e,t,a){"use strict";var s=a(7437);t.Z=e=>{let{type:t="submit",className:a,...i}=e;return(0,s.jsx)("button",{type:t,className:"".concat(a," inline-flex items-center px-4 py-2 bg-blue-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"),...i})}},5830:function(e,t,a){"use strict";var s=a(7437);t.Z=e=>{let{disabled:t=!1,className:a,...i}=e;return(0,s.jsx)("input",{disabled:t,className:"".concat(a," rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 w-full"),...i})}},3042:function(e,t,a){"use strict";var s=a(7437);t.Z=e=>{let{className:t,children:a,...i}=e;return(0,s.jsx)("label",{className:"".concat(t," block font-medium text-sm text-gray-700"),...i,children:a})}},7930:function(e,t,a){"use strict";a.d(t,{a:function(){return o}});var s=a(6487),i=a(6952),r=a(2265),n=a(4033);let o=function(){let{middleware:e,redirectIfAuthenticated:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,n.useRouter)(),o=(0,n.useParams)(),{data:l,error:c,mutate:d}=(0,s.ZP)("/api/user",()=>i.Z.get("/api/user").then(e=>e.data).catch(e=>{if(409!==e.response.status)throw e;a.push("/verify-email")})),{data:u,mutate:m}=(0,s.ZP)((null==l?void 0:l.is_company)?"/api/company/me":"/api/worker/me",()=>i.Z.get((null==l?void 0:l.is_company)?"/api/company/me":"/api/worker/me").then(e=>e.data).catch(e=>{if(409!==e.response.status)throw e;a.push("/verify-email")})),h=()=>i.Z.get("/sanctum/csrf-cookie"),p=async e=>{let{setErrors:t,...a}=e;await h(),t([]),i.Z.post("/register",a).then(()=>d()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},x=async e=>{let{setErrors:t,setStatus:a,...s}=e;await h(),t([]),a(null),i.Z.post("/login",s).then(()=>d()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},g=async e=>{let{setErrors:t,setStatus:a,email:s}=e;await h(),t([]),a(null),i.Z.post("/forgot-password",{email:s}).then(e=>a(e.data.status)).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},f=async e=>{let{setErrors:t,setStatus:s,...r}=e;await h(),t([]),s(null),i.Z.post("/reset-password",{token:o.token,...r}).then(e=>a.push("/login?reset="+btoa(e.data.status))).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},j=async()=>{c||await i.Z.post("/logout").then(()=>d()),window.location.pathname="/login"};return(0,r.useEffect)(()=>{"guest"===e&&t&&l&&a.push(t),"/verify-email"===window.location.pathname&&(null==l?void 0:l.email_verified_at)&&a.push(t),"auth"===e&&c&&j()},[l,c]),{user:l,register:p,login:x,forgotPassword:g,resetPassword:f,resendEmailVerification:e=>{let{setStatus:t}=e;i.Z.post("/email/verification-notification").then(e=>t(e.data.status))},logout:j,userDetails:u,mutateUserDetails:m}}},2246:function(e,t,a){"use strict";a.d(t,{i:function(){return o}});var s=a(6487),i=a(6952),r=a(2265);let n=async(e,t,a)=>{try{let s=await (0,i.Z)({method:t,url:e,...a});return s.data}catch(e){if(409!==e.response.status)throw e;console.error("Verify email")}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{data:i,error:o,mutate:l,isValidating:c}=(0,s.ZP)([e,t],()=>n(e,t,a),a);return(0,r.useEffect)(()=>{},[i,o]),{data:i,error:o,mutate:l,isLoading:c}}},6952:function(e,t,a){"use strict";var s=a(1630),i=a.n(s);let r=i().create({baseURL:"https://api-dev.turizmo.pro",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0,withXSRFToken:!0});t.Z=r}},function(e){e.O(0,[530,971,472,744],function(){return e(e.s=4146)}),_N_E=e.O()}]);