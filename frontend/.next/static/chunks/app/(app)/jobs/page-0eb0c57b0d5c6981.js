(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{4146:function(e,t,s){Promise.resolve().then(s.bind(s,7245))},7245:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(7437),i=s(2265),n=s(7930),r=s(3540),o=s(2246),l=s(5830),c=s(3042),d=s(6952),u=e=>{let{job:t,isCompany:s,onApply:i,onDelete:n}=e,{title:o,description:l,location:c,wage_rate:d,company_id:u}=t;return(0,a.jsxs)("div",{className:"max-w p-4 border border-gray-300 rounded-md mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-2",children:o}),(0,a.jsx)("p",{className:"text-gray-600 mb-2 text-sm",children:l}),(0,a.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Location: ",c]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Wage Rate: â‚¬",d]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-2 text-sm",children:["Company: ",u]}),s?(0,a.jsx)(r.Z,{className:"!bg-red-500",onClick:n,children:"Delete"}):(0,a.jsx)(r.Z,{onClick:i,children:"Apply"})]})};function m(){var e;let{user:t}=(0,n.a)({middleware:"auth"}),{data:s,error:m,mutate:h,isLoading:p}=(0,o.i)("/api/company/jobs"),[x,g]=(0,i.useState)(!1),[f,j]=(0,i.useState)({title:"",description:"",location:"",date:"",wage_rate:""}),v=()=>{console.log("haha"),g(!0)},y=()=>{g(!1)},b=e=>{let{name:t,value:s}=e.target;j(e=>({...e,[t]:s}))},w=async e=>{e.preventDefault();try{let e=await d.Z.post("/api/jobs",{...f,company_id:t.id});200===e.status?(h(),y()):console.error("Error creating job")}catch(e){console.error("Error creating job",e)}},N=async e=>{e.preventDefault()},Z=async e=>{e.preventDefault()};return(0,a.jsx)("div",{className:"py-8 h-[calc(100vh-65px)]",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 h-full",children:(0,a.jsxs)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg h-full p-6",children:[(null==s?void 0:null===(e=s.jobs)||void 0===e?void 0:e.length)>0?(0,a.jsxs)(a.Fragment,{children:[s.jobs.map(e=>(0,a.jsx)(u,{job:e,isCompany:t.is_company,onDelete:()=>N(e.id),onApply:()=>Z(e.id)},e.id)),(0,a.jsx)("div",{className:"text-center mt-6",children:(0,a.jsx)(r.Z,{onClick:v,children:"+ Create New Job"})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:p?"Loading...":m?null==m?void 0:m.message:(0,a.jsx)(r.Z,{onClick:v,children:"+ Create New Job"})}),x&&(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40",children:(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-md p-5 max-w-md mx-auto",children:[(0,a.jsxs)("form",{onSubmit:w,className:"grid gap-4",children:[(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c.Z,{htmlFor:"title",children:"Job Title"}),(0,a.jsx)(l.Z,{type:"text",id:"title",name:"title",value:f.title,onChange:b,required:!0})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c.Z,{htmlFor:"description",children:"Description"}),(0,a.jsx)(l.Z,{type:"text",id:"description",name:"description",value:f.description,onChange:b,required:!0})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c.Z,{htmlFor:"location",children:"Location"}),(0,a.jsx)(l.Z,{type:"text",id:"location",name:"location",value:f.location,onChange:b,required:!0})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c.Z,{htmlFor:"date",children:"Date"}),(0,a.jsx)(l.Z,{id:"date",name:"date",value:f.date,onChange:b,type:"date",required:!0})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(c.Z,{htmlFor:"wageRate",children:"Wage Rate"}),(0,a.jsx)(l.Z,{id:"wageRate",name:"wage_rate",value:f.wageRate,onChange:b,type:"number",required:!0})]}),(0,a.jsx)("div",{className:"col-span-2",children:(0,a.jsx)(r.Z,{type:"submit",children:"Create Job"})})]}),(0,a.jsx)("button",{onClick:y,className:"absolute top-0 right-0 mt-2 mr-2 text-gray-400 hover:text-gray-600",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})})]})})})}function h(){var e;let{user:t,userDetails:s,mutateUserDetails:i}=(0,n.a)({middleware:"auth"}),{data:r,error:l,mutate:c,isLoading:m}=(0,o.i)("/api/worker/jobs"),h=async e=>{try{let s=await d.Z.post("/api/application",{job_id:e,worker_id:t.id});200===s.status?(c(),i()):console.error("Error creating job")}catch(e){console.error("Error creating job",e)}};return(0,a.jsx)("div",{className:"py-8 h-[calc(100vh-65px)]",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 h-full",children:[(0,a.jsxs)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg p-6",children:["Hey"," ",(0,a.jsx)("span",{className:"font-semibold",children:null==s?void 0:s.worker.full_name})," ","you have"," ",(0,a.jsx)("span",{className:"font-semibold",children:null==s?void 0:s.worker.daily_application_limit})," ","applications left for today!"]}),(0,a.jsx)("div",{className:"bg-white overflow-auto shadow-sm sm:rounded-lg p-6 mt-1",children:(null==r?void 0:null===(e=r.jobs)||void 0===e?void 0:e.length)>0?(0,a.jsx)(a.Fragment,{children:r.jobs.map(e=>(0,a.jsx)(u,{job:e,isCompany:t.is_company,onApply:()=>h(e.id)},e.id))}):(0,a.jsx)("div",{className:"flex items-center justify-center",children:m?"Loading...":l?null==l?void 0:l.message:"No jobs found..."})})]})})}function p(){let{user:e}=(0,n.a)({middleware:"auth"});return e.is_company?(0,a.jsx)(m,{}):(0,a.jsx)(h,{})}},3540:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let{type:t="submit",className:s,...i}=e;return(0,a.jsx)("button",{type:t,className:"".concat(s," inline-flex items-center px-4 py-2 bg-blue-500 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 active:bg-gray-900 focus:outline-none focus:border-gray-900 focus:ring ring-gray-300 disabled:opacity-25 transition ease-in-out duration-150"),...i})}},5830:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let{disabled:t=!1,className:s,...i}=e;return(0,a.jsx)("input",{disabled:t,className:"".concat(s," rounded-md shadow-sm border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 w-full"),...i})}},3042:function(e,t,s){"use strict";var a=s(7437);t.Z=e=>{let{className:t,children:s,...i}=e;return(0,a.jsx)("label",{className:"".concat(t," block font-medium text-sm text-gray-700"),...i,children:s})}},7930:function(e,t,s){"use strict";s.d(t,{a:function(){return o}});var a=s(6487),i=s(6952),n=s(2265),r=s(4033);let o=function(){let{middleware:e,redirectIfAuthenticated:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=(0,r.useRouter)(),o=(0,r.useParams)(),{data:l,error:c,mutate:d}=(0,a.ZP)("/api/user",()=>i.Z.get("/api/user").then(e=>e.data).catch(e=>{if(409!==e.response.status)throw e;s.push("/verify-email")})),{data:u,mutate:m}=(0,a.ZP)((null==l?void 0:l.is_company)?"/api/company/me":"/api/worker/me",()=>i.Z.get((null==l?void 0:l.is_company)?"/api/company/me":"/api/worker/me").then(e=>e.data).catch(e=>{if(409!==e.response.status)throw e;s.push("/verify-email")})),h=()=>i.Z.get("/sanctum/csrf-cookie"),p=async e=>{let{setErrors:t,...s}=e;await h(),t([]),i.Z.post("/register",s).then(()=>d()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},x=async e=>{let{setErrors:t,setStatus:s,...a}=e;await h(),t([]),s(null),i.Z.post("/login",a).then(()=>d()).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},g=async e=>{let{setErrors:t,setStatus:s,email:a}=e;await h(),t([]),s(null),i.Z.post("/forgot-password",{email:a}).then(e=>s(e.data.status)).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},f=async e=>{let{setErrors:t,setStatus:a,...n}=e;await h(),t([]),a(null),i.Z.post("/reset-password",{token:o.token,...n}).then(e=>s.push("/login?reset="+btoa(e.data.status))).catch(e=>{if(422!==e.response.status)throw e;t(e.response.data.errors)})},j=async()=>{c||await i.Z.post("/logout").then(()=>d()),window.location.pathname="/login"};return(0,n.useEffect)(()=>{"guest"===e&&t&&l&&s.push(t),"/verify-email"===window.location.pathname&&(null==l?void 0:l.email_verified_at)&&s.push(t),"auth"===e&&c&&j()},[l,c]),{user:l,register:p,login:x,forgotPassword:g,resetPassword:f,resendEmailVerification:e=>{let{setStatus:t}=e;i.Z.post("/email/verification-notification").then(e=>t(e.data.status))},logout:j,userDetails:u,mutateUserDetails:m}}},2246:function(e,t,s){"use strict";s.d(t,{i:function(){return l}});var a=s(6487),i=s(6952),n=s(2265),r=s(4033);let o=async(e,t,s)=>{let a=(0,r.useRouter)();try{let a=await (0,i.Z)({method:t,url:e,...s});return a.data}catch(e){if(409!==e.response.status)throw e;a.push("/verify-email")}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{data:i,error:r,mutate:l,isValidating:c}=(0,a.ZP)([e,t],()=>o(e,t,s),s);return(0,n.useEffect)(()=>{},[i,r]),{data:i,error:r,mutate:l,isLoading:c}}},6952:function(e,t,s){"use strict";var a=s(1630),i=s.n(a);let n=i().create({baseURL:"https://api-dev.turizmo.pro",headers:{"X-Requested-With":"XMLHttpRequest"},withCredentials:!0,withXSRFToken:!0});t.Z=n}},function(e){e.O(0,[530,971,472,744],function(){return e(e.s=4146)}),_N_E=e.O()}]);